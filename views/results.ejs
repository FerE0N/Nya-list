<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados de la Encuesta</title>
    <link rel="stylesheet" href="/style.css" />
</head>

<body>
    <div class="container">
        <h1>Resultados Finales <span role="img" aria-label="trofeo">üèÜ</span></h1>
        <% if (results.length===0) { %>
            <p>A√∫n no hay votos registrados.</p>
            <% } else { %>
                <ul class="results-list">
                    <% const totalVotes=results.reduce((sum, r)=> sum + r.count, 0);
                        results.forEach(r => {
                        %>
                        <li class="results-item">
                            <div class="candidate-info">
                                <span class="candidate-name">
                                    <%= r._id %>
                                </span>
                                <span class="vote-count" data-votes="<%= r.count %>">
                                    <%= r.count %> votos
                                </span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar-fill" style="width: 0%;"
                                    data-percentage="<%= (r.count / totalVotes * 100).toFixed(1) %>">
                                </div>
                            </div>
                        </li>
                        <% }); %>
                </ul>
                <% } %>
    </div>

    <script src="/script-results.js" defer></script>
</body>

</html>